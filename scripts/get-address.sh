#!/bin/bash

# Check if CALLDATA environment variable is supplied
# if [ -z "$CALLDATA" ]; then
#     echo "Error: CALLDATA environment variable is not supplied."
#     exit 1
# fi

CALLDATA="0x608060405260405162000d9638038062000d968339810160408190526200002691620004be565b81604051806020016040528060008152506200004b82826000620000ae60201b60201c565b506200007b905060017fb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6104620004f6565b60008051602062000d4f833981519152146200009b576200009b62000518565b620000a681620000eb565b5050620005a7565b620000b98362000146565b600082511180620000c75750805b15620000e657620000e483836200018860201b620002261760201c565b505b505050565b7f7e644d79422f17c01e4894b5f4f588d331ebfa28653d42ae832dc59e38c9798f62000116620001b9565b604080516001600160a01b03928316815291841660208301520160405180910390a16200014381620001f2565b50565b6200015181620002a7565b6040516001600160a01b038216907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a250565b6060620001b0838360405180606001604052806027815260200162000d6f602791396200035b565b90505b92915050565b6000620001e360008051602062000d4f83398151915260001b620003da60201b620001e21760201c565b546001600160a01b0316919050565b6001600160a01b0381166200025d5760405162461bcd60e51b815260206004820152602660248201527f455243313936373a206e65772061646d696e20697320746865207a65726f206160448201526564647265737360d01b60648201526084015b60405180910390fd5b806200028660008051602062000d4f83398151915260001b620003da60201b620001e21760201c565b80546001600160a01b0319166001600160a01b039290921691909117905550565b620002bd81620003dd60201b620002521760201c565b620003215760405162461bcd60e51b815260206004820152602d60248201527f455243313936373a206e657720696d706c656d656e746174696f6e206973206e60448201526c1bdd08184818dbdb9d1c9858dd609a1b606482015260840162000254565b80620002867f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc60001b620003da60201b620001e21760201c565b6060600080856001600160a01b0316856040516200037a919062000554565b600060405180830381855af49150503d8060008114620003b7576040519150601f19603f3d011682016040523d82523d6000602084013e620003bc565b606091505b509092509050620003d086838387620003ec565b9695505050505050565b90565b6001600160a01b03163b151590565b606083156200046057825160000362000458576001600160a01b0385163b620004585760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640162000254565b50816200046c565b6200046c838362000474565b949350505050565b815115620004855781518083602001fd5b8060405162461bcd60e51b815260040162000254919062000572565b80516001600160a01b0381168114620004b957600080fd5b919050565b60008060408385031215620004d257600080fd5b620004dd83620004a1565b9150620004ed60208401620004a1565b90509250929050565b81810381811115620001b357634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052600160045260246000fd5b60005b838110156200054b57818101518382015260200162000531565b50506000910152565b60008251620005688184602087016200052e565b9190910192915050565b6020815260008251806020840152620005938160408501602087016200052e565b601f01601f19169190910160400192915050565b61079880620005b76000396000f3fe60806040526004361061004e5760003560e01c80633659cfe6146100655780634f1ef286146100855780635c60da1b146100985780638f283970146100c9578063f851a440146100e95761005d565b3661005d5761005b6100fe565b005b61005b6100fe565b34801561007157600080fd5b5061005b61008036600461062a565b610110565b61005b610093366004610645565b61014d565b3480156100a457600080fd5b506100ad6101b4565b6040516001600160a01b03909116815260200160405180910390f35b3480156100d557600080fd5b5061005b6100e436600461062a565b6101e5565b3480156100f557600080fd5b506100ad610205565b61010e610109610261565b61026b565b565b61011861028f565b6001600160a01b0316330361014557610142816040518060200160405280600081525060006102c2565b50565b6101426100fe565b61015561028f565b6001600160a01b031633036101ac576101a78383838080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250600192506102c2915050565b505050565b6101a76100fe565b60006101be61028f565b6001600160a01b031633036101da576101d5610261565b905090565b6101e26100fe565b90565b6101ed61028f565b6001600160a01b0316330361014557610142816102ed565b600061020f61028f565b6001600160a01b031633036101da576101d561028f565b606061024b838360405180606001604052806027815260200161073c60279139610341565b9392505050565b6001600160a01b03163b151590565b60006101d56103b9565b3660008037600080366000845af43d6000803e80801561028a573d6000f35b3d6000fd5b60007fb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d61035b546001600160a01b0316919050565b6102cb836103e1565b6000825111806102d85750805b156101a7576102e78383610226565b50505050565b7f7e644d79422f17c01e4894b5f4f588d331ebfa28653d42ae832dc59e38c9798f61031661028f565b604080516001600160a01b03928316815291841660208301520160405180910390a161014281610421565b6060600080856001600160a01b03168560405161035e91906106ec565b600060405180830381855af49150503d8060008114610399576040519150601f19603f3d011682016040523d82523d6000602084013e61039e565b606091505b50915091506103af868383876104cf565b9695505050505050565b60007f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc6102b3565b6103ea81610550565b6040516001600160a01b038216907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a250565b6001600160a01b03811661048b5760405162461bcd60e51b815260206004820152602660248201527f455243313936373a206e65772061646d696e20697320746865207a65726f206160448201526564647265737360d01b60648201526084015b60405180910390fd5b807fb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d61035b80546001600160a01b0319166001600160a01b039290921691909117905550565b6060831561053e578251600003610537576001600160a01b0385163b6105375760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401610482565b5081610548565b61054883836105e4565b949350505050565b6001600160a01b0381163b6105bd5760405162461bcd60e51b815260206004820152602d60248201527f455243313936373a206e657720696d706c656d656e746174696f6e206973206e60448201526c1bdd08184818dbdb9d1c9858dd609a1b6064820152608401610482565b807f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc6104ae565b8151156105f45781518083602001fd5b8060405162461bcd60e51b81526004016104829190610708565b80356001600160a01b038116811461062557600080fd5b919050565b60006020828403121561063c57600080fd5b61024b8261060e565b60008060006040848603121561065a57600080fd5b6106638461060e565b9250602084013567ffffffffffffffff8082111561068057600080fd5b818601915086601f83011261069457600080fd5b8135818111156106a357600080fd5b8760208285010111156106b557600080fd5b6020830194508093505050509250925092565b60005b838110156106e35781810151838201526020016106cb565b50506000910152565b600082516106fe8184602087016106c8565b9190910192915050565b60208152600082518060208401526107278160408501602087016106c8565b601f01601f1916919091016040019291505056fe416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564a26469706673582212209945dc3d030e05e339ad9e69c7777bcacb66e4e6e49b4d3193c669dfe24c0fce64736f6c63430008120033b53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c656400000000000000000000000005ff93bfb7dd2ea8f19dd15381bb63bb06db660f000000000000000000000000396c7a2bb4d98207c335236020487f7488510670"

# Remove "0x" prefix if present in CALLDATA
CALLDATA="${CALLDATA#0x}"

# Calculate the length of CALLDATA in hex, padding to 64 characters
SIZE=$(printf '%064x' $((${#CALLDATA} / 2)))

# Construct and execute the curl command
curl https://rpc.mainnet.oasys.games \
  -X POST \
  -H "Content-Type: application/json" \
  --data '{"method":"eth_call","params":[{"from": null,"to":"0x123e3ae459a8D049F27Ba62B8a5D48c68A100EBC","data":"0x44f6fec700000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000'"$SIZE$CALLDATA"'"}, "latest"],"id":1,"jsonrpc":"2.0"}'